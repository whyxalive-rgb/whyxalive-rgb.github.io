<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Crypto Clicker</title>
    <style>
        /* –°—Ç–∏–ª–∏ –≤ –¥—É—Ö–µ Dark Mode / NotCoin */
        body { margin: 0; padding: 0; background-color: #000; color: #fff; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; overflow: hidden; touch-action: manipulation; }
        .screen { display: none; height: 100vh; flex-direction: column; padding: 20px; box-sizing: border-box; }
        .active { display: flex; }
        
        /* –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω */
        .balance-container { text-align: center; margin-top: 20px; }
        .balance { font-size: 48px; font-weight: bold; color: #f3ba2f; }
        .coin-container { flex-grow: 1; display: flex; justify-content: center; align-items: center; position: relative; }
        .coin { width: 250px; height: 250px; background: radial-gradient(circle, #f3ba2f 0%, #d49e12 100%); border-radius: 50%; box-shadow: 0 0 50px rgba(243, 186, 47, 0.4); transition: transform 0.1s; cursor: pointer; border: 5px solid #fff; position: relative; z-index: 10; }
        .coin:active { transform: scale(0.95); }
        .energy-bar { width: 100%; height: 10px; background: #333; border-radius: 5px; margin-bottom: 20px; overflow: hidden; }
        .energy-fill { height: 100%; background: linear-gradient(90deg, #f3ba2f, #ffeb3b); width: 100%; transition: width 0.5s; }
        
        /* –≠—Ñ—Ñ–µ–∫—Ç –∫–ª–∏–∫–∞ (+1) */
        .click-anim { position: absolute; color: white; font-weight: bold; font-size: 24px; animation: floatUp 1s ease-out forwards; pointer-events: none; }
        @keyframes floatUp { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-100px); } }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .nav { position: fixed; bottom: 0; left: 0; width: 100%; background: #1a1a1a; display: flex; justify-content: space-around; padding: 15px 0; border-top: 1px solid #333; z-index: 20; }
        .nav-btn { background: none; border: none; color: #888; font-size: 14px; display: flex; flex-direction: column; align-items: center; }
        .nav-btn.active-btn { color: #f3ba2f; }
        .nav-icon { font-size: 24px; margin-bottom: 5px; }

        /* –°–ø–∏—Å–∫–∏ (–ú–∞–≥–∞–∑–∏–Ω, –î—Ä—É–∑—å—è) */
        .list-item { background: #1a1a1a; padding: 15px; border-radius: 12px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        .btn-action { background: #f3ba2f; border: none; padding: 8px 16px; border-radius: 8px; font-weight: bold; cursor: pointer; color: #000; }
        .btn-action:disabled { background: #555; color: #888; cursor: not-allowed; }
        
        h2 { border-bottom: 2px solid #333; padding-bottom: 10px; }
    </style>
</head>
<body>

    <!-- –≠–ö–†–ê–ù 1: –ö–õ–ò–ö–ï–† -->
    <div id="game" class="screen active">
        <div class="balance-container">
            <div id="balance" class="balance">0</div>
            <div style="font-size: 14px; color: #888;">–ú–æ–Ω–µ—Ç—ã</div>
        </div>
        <div class="coin-container">
            <div class="coin" id="coin-btn"></div>
        </div>
        <div style="text-align: center; margin-bottom: 5px;">‚ö° <span id="energy-val">1000</span>/1000</div>
        <div class="energy-bar"><div id="energy-fill" class="energy-fill"></div></div>
        <div style="height: 60px;"></div> <!-- –û—Ç—Å—Ç—É–ø –ø–æ–¥ –º–µ–Ω—é -->
    </div>

    <!-- –≠–ö–†–ê–ù 2: –ú–ê–ì–ê–ó–ò–ù -->
    <div id="shop" class="screen">
        <h2>–ú–∞–≥–∞–∑–∏–Ω —É–ª—É—á—à–µ–Ω–∏–π</h2>
        <div id="shop-list"></div>
    </div>

    <!-- –≠–ö–†–ê–ù 3: –ó–ê–î–ê–ù–ò–Ø -->
    <div id="tasks" class="screen">
        <h2>–ó–∞–¥–∞–Ω–∏—è</h2>
        <div class="list-item">
            <div>
                <div>–ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ –∫–∞–Ω–∞–ª</div>
                <div style="color: #f3ba2f; font-size: 12px;">+5000 –º–æ–Ω–µ—Ç</div>
            </div>
            <button class="btn-action" onclick="checkTask(this, 5000)">Check</button>
        </div>
    </div>

    <!-- –≠–ö–†–ê–ù 4: –î–†–£–ó–¨–Ø -->
    <div id="friends" class="screen">
        <h2>–†–µ—Ñ–µ—Ä–∞–ª—ã</h2>
        <div style="background: #222; padding: 15px; border-radius: 10px; text-align: center; margin-bottom: 20px;">
            <div style="font-size: 12px; color: #aaa;">–¢–≤–æ—è —Å—Å—ã–ª–∫–∞:</div>
            <code id="ref-link" style="color: #f3ba2f; word-break: break-all;">t.me/MyBot?start=123</code>
            <button class="btn-action" style="margin-top: 10px; width: 100%;" onclick="copyRef()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
        </div>
        <div class="list-item">
            <div>–î—Ä—É–≥: Alex</div>
            <div style="color: #888;">+1500</div>
        </div>
    </div>

    <!-- –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
    <div class="nav">
        <button class="nav-btn active-btn" onclick="switchTab('game', this)"><span class="nav-icon">ü™ô</span>Play</button>
        <button class="nav-btn" onclick="switchTab('shop', this)"><span class="nav-icon">üöÄ</span>Boost</button>
        <button class="nav-btn" onclick="switchTab('tasks', this)"><span class="nav-icon">üìã</span>Task</button>
        <button class="nav-btn" onclick="switchTab('friends', this)"><span class="nav-icon">üë•</span>Frens</button>
    </div>

    <script>
        // --- –õ–û–ì–ò–ö–ê –ò–ì–†–´ ---
        let state = {
            balance: 0,
            energy: 1000,
            maxEnergy: 1000,
            multitap: 1,
            costs: { multitap: 100, energy: 100 }
        };

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        if(localStorage.getItem('clickerState')) {
            state = JSON.parse(localStorage.getItem('clickerState'));
        }

        const els = {
            balance: document.getElementById('balance'),
            energyVal: document.getElementById('energy-val'),
            energyFill: document.getElementById('energy-fill'),
            coin: document.getElementById('coin-btn'),
            shopList: document.getElementById('shop-list')
        };

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
        function updateUI() {
            els.balance.textContent = state.balance.toLocaleString();
            els.energyVal.textContent = Math.floor(state.energy);
            els.energyFill.style.width = (state.energy / state.maxEnergy * 100) + '%';
        }

        // –ö–ª–∏–∫
        els.coin.addEventListener('click', (e) => {
            if (state.energy >= state.multitap) {
                state.balance += state.multitap;
                state.energy -= state.multitap;
                
                // –ê–Ω–∏–º–∞—Ü–∏—è —Ü–∏—Ñ—Ä—ã
                const rect = els.coin.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                showFloatText(x, y, `+${state.multitap}`);
                
                // –í–∏–±—Ä–∞—Ü–∏—è (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö)
                if (navigator.vibrate) navigator.vibrate(10);
                
                updateUI();
                saveState();
            }
        });

        // –ê–Ω–∏–º–∞—Ü–∏—è —Ü–∏—Ñ—Ä—ã
        function showFloatText(x, y, text) {
            const el = document.createElement('div');
            el.className = 'click-anim';
            el.innerText = text;
            el.style.left = `${x}px`;
            el.style.top = `${y}px`;
            els.coin.appendChild(el);
            setTimeout(() => el.remove(), 1000);
        }

        // –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–Ω–µ—Ä–≥–∏–∏
        setInterval(() => {
            if (state.energy < state.maxEnergy) {
                state.energy = Math.min(state.energy + 1, state.maxEnergy);
                updateUI();
                saveState();
            }
        }, 1000);

        // –ú–∞–≥–∞–∑–∏–Ω
        function renderShop() {
            els.shopList.innerHTML = `
                <div class="list-item">
                    <div>
                        <div>Multitap (Lvl ${state.multitap})</div>
                        <div style="color: #888; font-size: 12px;">+1 –∑–∞ —Ç–∞–ø</div>
                    </div>
                    <button class="btn-action" onclick="buyUpgrade('multitap')">
                        ${state.costs.multitap} üí∞
                    </button>
                </div>
                 <div class="list-item">
                    <div>
                        <div>Energy Limit</div>
                        <div style="color: #888; font-size: 12px;">+500 —ç–Ω–µ—Ä–≥–∏–∏</div>
                    </div>
                    <button class="btn-action" onclick="buyUpgrade('energy')">
                        ${state.costs.energy} üí∞
                    </button>
                </div>
            `;
        }

        window.buyUpgrade = (type) => {
            const cost = state.costs[type];
            if (state.balance >= cost) {
                state.balance -= cost;
                state.costs[type] = Math.floor(cost * 2); // –¶–µ–Ω–∞ —Ä–∞—Å—Ç–µ—Ç
                if(type === 'multitap') state.multitap++;
                if(type === 'energy') state.maxEnergy += 500;
                
                updateUI();
                renderShop();
                saveState();
                alert('–ö—É–ø–ª–µ–Ω–æ!');
            } else {
                alert('–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –º–æ–Ω–µ—Ç!');
            }
        };

        // –ó–∞–¥–∞–Ω–∏—è
        window.checkTask = (btn, reward) => {
            btn.textContent = 'Checking...';
            setTimeout(() => {
                state.balance += reward;
                btn.textContent = 'Done ‚úÖ';
                btn.disabled = true;
                updateUI();
                saveState();
            }, 1000);
        };

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        window.switchTab = (tabId, btn) => {
            document.querySelectorAll('.screen').forEach(el => el.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active-btn'));
            btn.classList.add('active-btn');
            if(tabId === 'shop') renderShop();
        };

        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏
        window.copyRef = () => {
             // –ò–º–∏—Ç–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const userId = Math.floor(Math.random() * 100000);
            const link = `https://t.me/MyClickerBot?start=ref_${userId}`;
            navigator.clipboard.writeText(link);
            alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞: ' + link);
        };

        function saveState() {
            localStorage.setItem('clickerState', JSON.stringify(state));
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        updateUI();
        
        // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¢–µ–ª–µ–≥—Ä–∞–º (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω)
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.expand();
        }
    </script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</body>
</html>
